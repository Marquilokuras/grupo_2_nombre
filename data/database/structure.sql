CREATE DATABASE VenenoDB;
USE VenenoDB;

CREATE TABLE `USERS` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `name` VARCHAR(255) NOT NULL,
   `lastname` VARCHAR(255) NOT NULL,
   `username` VARCHAR(255) NOT NULL,
   `email` VARCHAR(255) NOT NULL,
   `password` VARCHAR(255) NOT NULL,
   `gender` VARCHAR(30) NOT NULL,
   `image` VARCHAR(255) NOT NULL,
   `age` VARCHAR(4) NOT NULL,
   `address` VARCHAR(255) NOT NULL,
   `role` VARCHAR(100) NOT NULL,
   PRIMARY KEY (`id`)
);

CREATE TABLE `USERS_PRODUCTS` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `user_id` INT NOT NULL,
   `product_id` INT NOT NULL,
   `quantity_purchases` BIGINT NOT NULL,
   PRIMARY KEY (`id`)
);

CREATE TABLE `PRODUCTS` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `name` VARCHAR(255) NOT NULL,
   `price` DECIMAL NOT NULL,
   `description` VARCHAR(255) NOT NULL,
   `image` VARCHAR(255) NOT NULL,
   `availability` BIT NOT NULL,
   `amount` INT NOT NULL,
   `cartSale` BIT NOT NULL,
   `category` VARCHAR(255) NOT NULL,
   `gender` VARCHAR(30) NOT NULL,
   `discount` INT NOT NULL,
   PRIMARY KEY (`id`)
);

CREATE TABLE `SHOPPING_CARTS` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `user_id` INT NOT NULL,
   `product_id` INT NOT NULL,
   `amount` INT NOT NULL,
   `price` DECIMAL NOT NULL,
   `gift` BIT,
   `address` VARCHAR(255) NOT NULL,
   PRIMARY KEY (`id`)
);


ALTER TABLE `USERS_PRODUCTS` ADD CONSTRAINT `FK_86f3ed52-1cab-4c95-b682-cf12a5b6e258` FOREIGN KEY (`product_id`) REFERENCES `PRODUCTS`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `USERS_PRODUCTS` ADD CONSTRAINT `FK_007ce80f-e40a-4b13-816c-9cba4220aac4` FOREIGN KEY (`user_id`) REFERENCES `USERS`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `SHOPPING_CARTS` ADD CONSTRAINT `FK_23ad1ab4-8e9b-4ac4-aceb-a757e8790835` FOREIGN KEY (`user_id`) REFERENCES `USERS`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `SHOPPING_CARTS` ADD CONSTRAINT `FK_2297b6aa-fda4-4e83-9875-434b82f0694c` FOREIGN KEY (`product_id`) REFERENCES `PRODUCTS`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;
